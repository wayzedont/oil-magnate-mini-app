<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1e293b">
  <title>Train Alert Tyumen</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3063/3063823.png">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3063/3063823.png">

  <!-- Styles -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 2GIS MapGL -->
  <script src="https://mapgl.2gis.com/api/js/v1"></script>

  <!-- React & Babel for in-browser execution -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-neutral-100">
  <div id="root"></div>

  <!-- Application Code -->
  <script type="text/babel" data-presets="typescript,react">
    const { useState, useEffect, useRef } = React;
    const { createRoot } = ReactDOM;

    // --- Icons (Inline SVGs to avoid module loading issues on file://) ---
    const IconWrapper = ({ children, className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        {children}
      </svg>
    );

    const MapIcon = (props) => <IconWrapper {...props}><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></IconWrapper>;
    const Calendar = (props) => <IconWrapper {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconWrapper>;
    const Bell = (props) => <IconWrapper {...props}><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></IconWrapper>;
    const Settings = (props) => <IconWrapper {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></IconWrapper>;
    const TrainFront = (props) => <IconWrapper {...props}><path d="M8 3.1V7a4 4 0 0 0 8 0V3.1M2 8h20M3 8v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8"/><path d="m9 15 1.5 1.5M13.5 16.5 15 15M2 12h20M16 3.1h-8"/></IconWrapper>;
    const AlertTriangle = (props) => <IconWrapper {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconWrapper>;
    const LocateFixed = (props) => <IconWrapper {...props}><line x1="2" y1="12" x2="5" y2="12"/><line x1="19" y1="12" x2="22" y2="12"/><line x1="12" y1="2" x2="12" y2="5"/><line x1="12" y1="19" x2="12" y2="22"/><circle cx="12" cy="12" r="7"/><circle cx="12" cy="12" r="3"/></IconWrapper>;

    // --- Data ---
    const CROSSINGS = [
      { id: 1, name: "—É–ª. –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞—è", lat: 57.143419, lon: 65.485125, type: 'barrier' },
      { id: 2, name: "—É–ª. –ê–≤—Ç–æ—Ä–µ–º–æ–Ω—Ç–Ω–∞—è", lat: 57.136220, lon: 65.475651, type: 'traffic-light' },
      { id: 3, name: "–ü–ª–µ—Ö–∞–Ω–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–µ–∑–¥", lat: 57.126388, lon: 65.459267, type: 'barrier' },
      { id: 4, name: "–í–æ—Ä–æ–Ω–∏–Ω—Å–∫–∏–µ –≥–æ—Ä–∫–∏", lat: 57.168123, lon: 65.460542, type: 'traffic-light' },
      { id: 5, name: "—É–ª. –¢–∏–º–æ—Ñ–µ—è –ß–∞—Ä–∫–æ–≤–∞", lat: 57.185876, lon: 65.620987, type: 'barrier' },
    ];

    const generateSchedule = () => {
      const now = new Date();
      const schedules = [];
      CROSSINGS.forEach(c => {
        const times = [];
        for (const min of [2, 15, 45, 120, 240]) {
          const t = new Date(now.getTime() + min * 60000);
          times.push(t.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }));
        }
        schedules.push({ crossingId: c.id, times });
      });
      return schedules;
    };

    const INITIAL_SCHEDULE = generateSchedule();

    function getDistanceFromLatLonInMeters(lat1, lon1, lat2, lon2) {
      const R = 6371e3; 
      const œÜ1 = lat1 * Math.PI / 180;
      const œÜ2 = lat2 * Math.PI / 180;
      const ŒîœÜ = (lat2 - lat1) * Math.PI / 180;
      const ŒîŒª = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(ŒîœÜ/2) * Math.sin(ŒîœÜ/2) + Math.cos(œÜ1) * Math.cos(œÜ1) * Math.sin(ŒîŒª/2) * Math.sin(ŒîŒª/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }

    // --- Components ---

    const App = () => {
      const [activeScreen, setActiveScreen] = useState('map');
      const [userLoc, setUserLoc] = useState(null);
      const [notificationsEnabled, setNotificationsEnabled] = useState(true);
      const [radius] = useState(50);
      const [alert, setAlert] = useState(null);
      const [isSimulationMode, setIsSimulationMode] = useState(true);

      useEffect(() => {
        if (isSimulationMode && !userLoc) {
          setUserLoc({ lat: 57.1430, lon: 65.4850 }); 
        }
      }, [isSimulationMode]);

      useEffect(() => {
        if (!isSimulationMode && navigator.geolocation) {
          const watchId = navigator.geolocation.watchPosition(
            (pos) => setUserLoc({ lat: pos.coords.latitude, lon: pos.coords.longitude }),
            (err) => console.error(err),
            { enableHighAccuracy: true }
          );
          return () => navigator.geolocation.clearWatch(watchId);
        }
      }, [isSimulationMode]);

      useEffect(() => {
        if (!notificationsEnabled || !userLoc) return;
        const checkAlerts = () => {
          let activeAlert = null;
          CROSSINGS.forEach(crossing => {
            const dist = getDistanceFromLatLonInMeters(userLoc.lat, userLoc.lon, crossing.lat, crossing.lon);
            if (dist <= radius) {
              activeAlert = { crossing: crossing.name, time: "2 –º–∏–Ω—É—Ç—ã" };
            }
          });
          setAlert(activeAlert);
        };
        const interval = setInterval(checkAlerts, 5000);
        checkAlerts();
        return () => clearInterval(interval);
      }, [userLoc, notificationsEnabled, radius]);

      const handleMapClick = (lat, lon) => {
        if (isSimulationMode) setUserLoc({ lat, lon });
      };

      return (
        <div className="min-h-screen bg-neutral-100 flex items-center justify-center p-4 font-sans text-slate-800">
          <style>{`
            .phone-frame {
              box-shadow: 0 0 0 12px #2d3748, 0 0 0 14px #4a5568, 0 20px 50px -10px rgba(0,0,0,0.5);
            }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
            @keyframes pulse-ring {
              0% { transform: scale(0.33); opacity: 1; }
              80%, 100% { transform: scale(1.5); opacity: 0; }
            }
            .user-marker-pulse { position: relative; width: 16px; height: 16px; }
            .user-marker-pulse:before {
              content: ''; position: absolute; left: -8px; top: -8px; width: 32px; height: 32px;
              border-radius: 50%; background-color: rgba(59, 130, 246, 0.5);
              animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            }
            .user-marker-dot {
              width: 16px; height: 16px; background-color: #3b82f6; border: 2px solid white;
              border-radius: 50%; position: relative; z-index: 2; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            }
            .mapgl-map { font-family: inherit; }
          `}</style>

          <div className="phone-frame relative w-[375px] h-[812px] bg-slate-50 rounded-[40px] overflow-hidden flex flex-col z-10">
            <div className="h-10 bg-slate-900 text-white flex justify-between items-center px-6 text-xs font-medium z-20">
              <span>14:32</span>
              <div className="flex space-x-1">
                <div className="w-4 h-4 rounded-full bg-slate-700 border border-slate-500"></div>
                <div className="w-4 h-4 rounded-full bg-slate-700 border border-slate-500"></div>
              </div>
            </div>

            {alert && (
              <div className="absolute top-10 left-0 right-0 bg-red-500 text-white px-4 py-3 z-50 animate-in slide-in-from-top duration-300 shadow-lg">
                <div className="flex items-start space-x-3">
                  <AlertTriangle className="w-6 h-6 shrink-0 fill-white text-red-600" />
                  <div>
                    <p className="font-bold text-sm uppercase">–í–Ω–∏–º–∞–Ω–∏–µ!</p>
                    <p className="text-xs leading-tight mt-1">–ß–µ—Ä–µ–∑ {alert.time} –Ω–∞ –ø–µ—Ä–µ–µ–∑–¥–µ "{alert.crossing}" –±—É–¥–µ—Ç –ø–æ–µ–∑–¥.</p>
                  </div>
                </div>
              </div>
            )}

            <div className="flex-1 relative overflow-hidden bg-slate-100 flex flex-col">
              {activeScreen === 'map' && <MapScreen userLoc={userLoc} onMapClick={handleMapClick} crossings={CROSSINGS} isSimulationMode={isSimulationMode} />}
              {activeScreen === 'schedule' && <ScheduleScreen schedule={INITIAL_SCHEDULE} crossings={CROSSINGS} />}
              {activeScreen === 'alerts' && <AlertsInfoScreen />}
              {activeScreen === 'settings' && <SettingsScreen notifEnabled={notificationsEnabled} setNotifEnabled={setNotificationsEnabled} isSim={isSimulationMode} setSim={setIsSimulationMode} />}
            </div>

            <div className="h-20 bg-white border-t border-slate-200 flex justify-around items-center px-2 pb-4 shrink-0 z-30">
              <NavButton active={activeScreen === 'map'} onClick={() => setActiveScreen('map')} icon={<MapIcon />} label="–ö–∞—Ä—Ç–∞" />
              <NavButton active={activeScreen === 'schedule'} onClick={() => setActiveScreen('schedule')} icon={<Calendar />} label="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ" />
              <NavButton active={activeScreen === 'alerts'} onClick={() => setActiveScreen('alerts')} icon={<Bell />} label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" />
              <NavButton active={activeScreen === 'settings'} onClick={() => setActiveScreen('settings')} icon={<Settings />} label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" />
            </div>

            <div className="absolute bottom-1 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-slate-300 rounded-full mb-1 z-40"></div>
          </div>
        </div>
      );
    };

    const MapScreen = ({ userLoc, onMapClick, crossings, isSimulationMode }) => {
      const mapContainer = useRef(null);
      const mapInstance = useRef(null);
      const userMarkerRef = useRef(null);

      useEffect(() => {
        if (!mapContainer.current || mapInstance.current) return;
        if (window.mapgl) {
          mapInstance.current = new window.mapgl.Map(mapContainer.current, {
            center: [65.5000, 57.1450],
            zoom: 11.5,
            key: 'a74915dd-bd47-4802-bc04-a528de5465e4',
            style: 'c080bb6a-8134-4993-93a1-5b4d8c36a59b'
          });

          crossings.forEach(c => {
            const iconHtml = `
              <div style="transform: translate(-50%, -100%); display: flex; flex-direction: column; align-items: center; cursor: pointer;">
                <div style="background-color: #1e293b; color: white; padding: 6px; border-radius: 8px; border: 2px solid white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);">
                  ${c.type === 'traffic-light' 
                    ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(90deg);"><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>'
                    : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #fbbf24;"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>'
                  }
                </div>
                <span style="font-size: 10px; font-weight: bold; color: #334155; background-color: rgba(255,255,255,0.9); padding: 2px 4px; border-radius: 4px; margin-top: 4px; white-space: nowrap; box-shadow: 0 1px 2px rgba(0,0,0,0.1);">${c.name}</span>
              </div>
            `;
            new window.mapgl.HtmlMarker(mapInstance.current, {
              coordinates: [c.lon, c.lat],
              html: iconHtml,
            });
          });

          mapInstance.current.on('click', (e) => onMapClick(e.lngLat[1], e.lngLat[0]));
        }
        return () => { if (mapInstance.current) { mapInstance.current.destroy(); mapInstance.current = null; } };
      }, []);

      useEffect(() => {
        if (!mapInstance.current || !userLoc) return;
        if (!userMarkerRef.current) {
          const userHtml = `<div class="user-marker-pulse" style="transform: translate(-50%, -50%);"><div class="user-marker-dot"></div></div>`;
          userMarkerRef.current = new window.mapgl.HtmlMarker(mapInstance.current, {
            coordinates: [userLoc.lon, userLoc.lat],
            html: userHtml,
            interactive: false
          });
        } else {
          userMarkerRef.current.setCoordinates([userLoc.lon, userLoc.lat]);
        }
      }, [userLoc]);

      return (
        <div className="w-full h-full relative">
          <div className="absolute top-4 left-4 right-4 z-10 pointer-events-none">
            <div className="bg-white/90 backdrop-blur-md shadow-sm rounded-2xl p-3 flex items-center justify-between border border-slate-200">
              <div>
                <h1 className="text-sm font-bold text-slate-800">Train Alert Tyumen</h1>
                <p className="text-[10px] text-slate-500 flex items-center gap-1">{isSimulationMode ? "üî¥ –†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏ (–∂–º–∏ –∫–∞—Ä—Ç—É)" : "üü¢ GPS –ê–∫—Ç–∏–≤–µ–Ω"}</p>
              </div>
              <TrainFront className="text-blue-600 w-5 h-5" />
            </div>
          </div>
          <div ref={mapContainer} className="w-full h-full bg-slate-200" />
          <button className="absolute bottom-4 right-4 bg-white p-3 rounded-full shadow-lg text-slate-700 active:scale-95 transition-transform z-10" onClick={() => { if (userLoc && mapInstance.current) mapInstance.current.setCenter([userLoc.lon, userLoc.lat]); }}>
            <LocateFixed className="w-6 h-6" />
          </button>
        </div>
      );
    };

    const ScheduleScreen = ({ schedule, crossings }) => (
      <div className="p-6 pt-12 h-full overflow-y-auto">
        <h2 className="text-2xl font-bold text-slate-900 mb-6">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
        <div className="space-y-4">
          {schedule.map(item => {
            const crossingName = crossings.find(c => c.id === item.crossingId)?.name;
            return (
              <div key={item.crossingId} className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100">
                <div className="flex items-center gap-3 mb-3">
                  <div className="bg-blue-100 p-2 rounded-lg"><TrainFront className="w-5 h-5 text-blue-600" /></div>
                  <h3 className="font-semibold text-slate-800 text-sm">{crossingName}</h3>
                </div>
                <div className="flex flex-wrap gap-2">
                  {item.times.map(t => (
                    <span key={t} className="px-3 py-1 bg-slate-50 text-slate-600 rounded-full text-xs font-mono font-medium border border-slate-200">{t}</span>
                  ))}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    );

    const AlertsInfoScreen = () => (
      <div className="p-6 pt-12 h-full flex flex-col items-center text-center overflow-y-auto">
        <div className="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6 shrink-0">
          <Bell className="w-10 h-10 text-blue-600" />
        </div>
        <h2 className="text-2xl font-bold text-slate-900 mb-2">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
        <p className="text-slate-500 mb-8 leading-relaxed">
          –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é. –ï—Å–ª–∏ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ —Ä–∞–¥–∏—É—Å–µ <span className="font-bold text-slate-800">50 –º–µ—Ç—Ä–æ–≤</span> –æ—Ç –∂/–¥ –ø–µ—Ä–µ–µ–∑–¥–∞ –∏ –¥–æ –ø—Ä–∏–±—ã—Ç–∏—è –ø–æ–µ–∑–¥–∞ –æ—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç, –º—ã –ø—Ä–∏—à–ª–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
        </p>
        <div className="w-full bg-white p-4 rounded-xl shadow-sm border border-slate-100 text-left flex items-start gap-4">
          <div className="mt-1"><AlertTriangle className="w-5 h-5 text-amber-500" /></div>
          <div>
            <h4 className="font-semibold text-slate-800 text-sm">–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
            <p className="text-xs text-slate-500 mt-1">"–í–Ω–∏–º–∞–Ω–∏–µ! –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –Ω–∞ –ø–µ—Ä–µ–µ–∑–¥–µ ‚Ññ3 –±—É–¥–µ—Ç –ø–æ–µ–∑–¥."</p>
          </div>
        </div>
      </div>
    );

    const SettingsScreen = ({ notifEnabled, setNotifEnabled, isSim, setSim }) => (
      <div className="p-6 pt-12 h-full bg-slate-50 overflow-y-auto">
        <h2 className="text-2xl font-bold text-slate-900 mb-6">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <div className="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
          <div className="p-4 flex items-center justify-between border-b border-slate-50">
            <div className="flex items-center gap-3"><Bell className="w-5 h-5 text-slate-500" /><span className="text-sm font-medium text-slate-700">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span></div>
            <Switch checked={notifEnabled} onChange={setNotifEnabled} />
          </div>
          <div className="p-4 flex items-center justify-between border-b border-slate-50">
            <div className="flex items-center gap-3">
              <MapIcon className="w-5 h-5 text-slate-500" />
              <div><span className="text-sm font-medium text-slate-700 block">–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞</span><span className="text-xs text-slate-400 block">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ 50–º</span></div>
            </div>
            <span className="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded">50 –º</span>
          </div>
          <div className="p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <LocateFixed className="w-5 h-5 text-slate-500" />
              <div><span className="text-sm font-medium text-slate-700 block">–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏</span><span className="text-xs text-slate-400 block">–ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ –º–µ–Ω—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é</span></div>
            </div>
            <Switch checked={isSim} onChange={setSim} />
          </div>
        </div>
        <div className="mt-8 text-center"><p className="text-xs text-slate-400">Train Alert Tyumen v1.0.0</p></div>
      </div>
    );

    const Switch = ({ checked, onChange }) => (
      <button className={`w-12 h-7 rounded-full p-1 transition-colors duration-200 ease-in-out ${checked ? 'bg-blue-600' : 'bg-slate-200'}`} onClick={() => onChange(!checked)}>
        <div className={`bg-white w-5 h-5 rounded-full shadow-sm transform transition-transform duration-200 ease-in-out ${checked ? 'translate-x-5' : 'translate-x-0'}`} />
      </button>
    );

    const NavButton = ({ active, onClick, icon, label }) => (
      <button onClick={onClick} className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${active ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}>
        {React.cloneElement(icon, { size: 24, strokeWidth: active ? 2.5 : 2 })}
        <span className="text-[10px] font-medium">{label}</span>
      </button>
    );

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
  
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(err => console.log('SW needs local server or HTTPS'));
      });
    }
  </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>