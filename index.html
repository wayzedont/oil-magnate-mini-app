<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–µ—Ñ—Ç—è–Ω–æ–π –º–∞–≥–Ω–∞—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getFirestore, doc, setDoc, getDoc, collection, query, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

      // Make functions available globally
      window.collection = collection;
      window.doc = doc;
      window.setDoc = setDoc;
      window.getDoc = getDoc;
      window.query = query;
      window.getDocs = getDocs;

      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDzN2GdDHsPmsxs-0KyWtfFFIBsdhezFrg",
        authDomain: "renaissance-8a16f.firebaseapp.com",
        projectId: "renaissance-8a16f",
        storageBucket: "renaissance-8a16f.firebasestorage.app",
        messagingSenderId: "172376303650",
        appId: "1:172376303650:web:7e9e18edfe957e131a427b",
        measurementId: "G-G8WMLBPJ0D"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      window.db = getFirestore(app);
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <div class="header">
            <button class="profile-button" id="profileButton">
                <span class="profile-icon">üë§</span>
            </button>
            <div class="money-display">
                <span class="money-icon">üí∞</span>
                <span id="money">0</span>
                <span class="currency">‚ÇΩ</span>
            </div>
            <div class="oil-display">
                <span class="oil-icon">üõ¢Ô∏è</span>
                <span id="availableOil">0</span>
                <span class="unit">–±.</span>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="work">–†–∞–±–æ—Ç–∞</button>
            <button class="nav-tab" data-tab="sell">–ü—Ä–æ–¥–∞–∂–∞</button>
            <button class="nav-tab" data-tab="myLands">–°–∫–≤–∞–∂–∏–Ω—ã</button>
            <button class="nav-tab" data-tab="lands">–£—á–∞—Å—Ç–∫–∏</button>
            <button class="nav-tab" data-tab="company">–ö–æ–º–ø–∞–Ω–∏—è</button>
        </div>

        <!-- Tab: Work -->
        <div class="tab-content active" data-tab="work">
            <div class="work-screen">
                <div class="click-stats">
                    <div class="stat-row">
                        <p>–î–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫: <span id="clickPower">1</span>‚ÇΩ</p>
                    </div>
                    <div class="stat-row">
                        <p>–î–æ–±—ã—á–∞ –Ω–µ—Ñ—Ç–∏: <span id="oilExtractionRate">0</span> –±./—Å–µ–∫</p>
                    </div>
                </div>
                
                <button class="work-button" id="workButton">
                    <div class="work-icon">‚õèÔ∏è</div>
                    <div class="work-text">–†–∞–±–æ—Ç–∞—Ç—å</div>
                </button>
                
                <div class="upgrade-section">
                    <div class="upgrade-card">
                        <div class="upgrade-info">
                            <h3>‚ö° –°–∏–ª–∞ –∫–ª–∏–∫–∞</h3>
                            <p>–£—Ä–æ–≤–µ–Ω—å: <span id="clickSkillLevel">1</span></p>
                            <p>–î–æ—Ö–æ–¥: <span id="clickSkillBonus">1</span>‚ÇΩ –∑–∞ –∫–ª–∏–∫</p>
                        </div>
                        <button class="btn-upgrade-main" id="upgradeClickSkill">
                            –£–ª—É—á—à–∏—Ç—å<br><span id="clickSkillCost">100</span>‚ÇΩ
                        </button>
                    </div>
                </div>
                
                <div id="floatingNumbers"></div>
                <div class="bonus-circle" id="bonusCircle" style="display: none;">
                    <span class="bonus-text">x2</span>
                </div>
            </div>
        </div>

        <!-- Tab: Sell -->
        <div class="tab-content" data-tab="sell">
            <div class="sell-screen">
                <h2>–ü—Ä–æ–¥–∞–∂–∞ –Ω–µ—Ñ—Ç–∏</h2>
                <div class="available-oil-banner">
                    <span>–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏:</span>
                    <span id="sellAvailableOil" class="oil-amount">0 –±–∞—Ä—Ä–µ–ª–µ–π</span>
                </div>
                <div class="companies-list" id="companiesList"></div>
            </div>
        </div>

        <!-- Tab: My Lands -->
        <div class="tab-content" data-tab="myLands">
            <div class="my-lands-screen">
                <div class="lands-header">
                    <h2>–ú–æ–∏ —Å–∫–≤–∞–∂–∏–Ω—ã</h2>
                    <button class="btn-buy-slot" id="buySlotButton">
                        ‚ûï –ö—É–ø–∏—Ç—å —Å–ª–æ—Ç
                        <span id="slotCost" style="font-size: 11px; display: block; margin-top: 3px;"></span>
                    </button>
                </div>
                <div class="slots-info" id="slotsInfo">
                    <p>–°–ª–æ—Ç–æ–≤ –∑–∞–Ω—è—Ç–æ: <span id="usedSlots">0</span>/<span id="totalSlots">2</span></p>
                </div>
                <div class="lands-grid" id="myLandsGrid"></div>
                <div id="noLandsMessage" class="no-lands-message">
                    <p>–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Å–∫–≤–∞–∂–∏–Ω</p>
                    <p style="color: var(--text-gray); font-size: 14px;">–ö—É–ø–∏—Ç–µ —É—á–∞—Å—Ç–∫–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ "–£—á–∞—Å—Ç–∫–∏"</p>
                </div>
            </div>
        </div>

        <!-- Tab: Lands -->
        <div class="tab-content" data-tab="lands">
            <div class="lands-header">
                <h2>–ù–µ—Ñ—Ç—è–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏</h2>
                <button class="btn-generate" id="generateLands">
                    üîÑ –ù–æ–≤—ã–µ —É—á–∞—Å—Ç–∫–∏
                    <span id="generationLimit" style="font-size: 11px; display: block; margin-top: 3px;"></span>
                </button>
            </div>
            <div class="lands-grid" id="landsGrid"></div>
        </div>

        <!-- Tab: Company -->
        <div class="tab-content" data-tab="company">
            <div class="company-screen">
                <div class="company-header">
                    <h2>–ú–æ—è –∫–æ–º–ø–∞–Ω–∏—è</h2>
                    <button class="btn-generate" id="createOwnCompany" style="display: none;">
                        üè≠ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
                        <span style="font-size: 11px; display: block; margin-top: 3px; word-break: break-word;">25,000‚ÇΩ</span>
                    </button>
                </div>
                <div id="companyPlaceholder" class="no-company-message">
                    <p>–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç –∫–æ–º–ø–∞–Ω–∏–∏</p>
                    <p style="color: var(--text-gray); font-size: 14px;">–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</p>
                </div>
                <div id="companyManagement" style="display: none;">
                    <div class="company-info">
                        <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –∏ –∑–∞–∫—É–ø–∫–∞–º–∏</p>
                    </div>
                    <div class="production-section">
                        <h3>–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</h3>
                        <div id="productsList"></div>
                    </div>
                    <div class="buyback-section">
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–µ–π</h3>
                        <div class="company-info-card">
                            <p>–£–ª—É—á—à–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–π –ø—Ä–∏–±—ã–ª–∏!</p>
                            <p>–ö–∞–∂–¥–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç —Ü–µ–Ω—É –ø—Ä–æ–¥–∞–∂–∏ –∏ —Å–Ω–∏–∂–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal: Profile -->
        <div class="modal" id="profileModal">
            <div class="modal-content">
                <button class="modal-close" id="closeProfileModal">√ó</button>
                <h2>–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞</h2>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <p class="stat-label">–í—Å–µ–≥–æ –¥–µ–Ω–µ–≥</p>
                            <p class="stat-value" id="profileMoney">0‚ÇΩ</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üõ¢Ô∏è</div>
                        <div class="stat-info">
                            <p class="stat-label">–î–æ—Å—Ç—É–ø–Ω–æ –Ω–µ—Ñ—Ç–∏</p>
                            <p class="stat-value" id="profileOil">0 –±.</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üèóÔ∏è</div>
                        <div class="stat-info">
                            <p class="stat-label">–°–∫–≤–∞–∂–∏–Ω—ã –≤ —Ä–∞–±–æ—Ç–µ</p>
                            <p class="stat-value" id="profileLands">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-info">
                            <p class="stat-label">–î–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫</p>
                            <p class="stat-value" id="profileClickPower">1‚ÇΩ</p>
                        </div>
                    </div>

                    <div class="stat-card telegram-user" id="telegramUserCard" style="display: none;">
                        <div class="stat-icon">üë§</div>
                        <div class="stat-info">
                            <p class="stat-label">Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
                            <p class="stat-value" id="telegramUserName">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</p>
                            <p class="stat-value" id="telegramUserId" style="font-size: 12px; color: var(--text-gray);">ID: ???</p>
                        </div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button class="btn-danger" id="resetProgressButton">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                </div>
            </div>
        </div>

        <!-- Modal: Land Details -->
        <div class="modal" id="landModal">
            <div class="modal-content">
                <button class="modal-close" id="closeLandModal">√ó</button>
                <h2>–£—á–∞—Å—Ç–æ–∫ #<span id="landId"></span></h2>
                <div class="land-details">
                    <div class="detail-row">
                        <span>–¶–µ–Ω–∞:</span>
                        <span id="landPrice">0‚ÇΩ</span>
                    </div>
                    <div class="detail-row">
                        <span>–ó–∞–ø–∞—Å—ã –Ω–µ—Ñ—Ç–∏:</span>
                        <span id="landOilReserve">???</span>
                    </div>
                    <div class="detail-row quality" id="landQualityRow">
                        <span>–û—Ü–µ–Ω–∫–∞:</span>
                        <span id="landQuality">???</span>
                    </div>
                </div>
                <div class="land-actions">
                    <button class="btn-analyze" id="analyzeLandButton" style="display: none;">
                        üî¨ –ê–Ω–∞–ª–∏–∑ (<span id="analyzeCost">0</span>‚ÇΩ)
                    </button>
                    <button class="btn-buy" id="buyLandButton">–ö—É–ø–∏—Ç—å —É—á–∞—Å—Ç–æ–∫</button>
                </div>

                <div class="rigs-section" id="rigsSection" style="display: none;">
                    <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã—à–∫—É</h3>
                    <div class="rigs-list" id="rigsList"></div>
                    <div class="rig-status" id="rigStatus"></div>
                </div>
            </div>
        </div>

        <!-- Modal: Event -->
        <div class="modal" id="eventModal">
            <div class="modal-content" style="max-width: 500px;">
                <button class="modal-close" id="closeEventModal">√ó</button>
                <h2 id="eventTitle">–°–æ–±—ã—Ç–∏–µ</h2>
                <div class="event-content">
                    <p id="eventDescription"></p>
                    <div id="eventChoices" class="event-choices"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="game.js"></script>
</body>
</html>
