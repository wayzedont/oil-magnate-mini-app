# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—á–µ—Ç—á–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —É—á–∞—Å—Ç–∫–æ–≤ (3/3) —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è. –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏.

## –†–µ—à–µ–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ**
   - –í —Ñ—É–Ω–∫—Ü–∏–∏ `migrateSaveData()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `generationHistory`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

2. **–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```javascript
// –í migrateSaveData()
if (!this.state.generationHistory) {
    this.state.generationHistory = [];
} else if (Array.isArray(this.state.generationHistory)) {
    // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ (—Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç) –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    const now = Date.now();
    const cooldownTime = CONFIG.generation.cooldownTime;
    this.state.generationHistory = this.state.generationHistory.filter(
        timestamp => now - timestamp < cooldownTime
    );
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å:

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª 2 –ø–æ–ø—ã—Ç–∫–∏, –æ–±–Ω–æ–≤–∏–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É
1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏ —É—á–∞—Å—Ç–∫–∏ 2 —Ä–∞–∑–∞
2. –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **(1/3)**
3. **–û–±–Ω–æ–≤–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** ‚Üí –°—á–µ—Ç—á–∏–∫ –æ—Å—Ç–∞–ª—Å—è **(1/3)** ‚úÖ
4. –ú–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ 1 —Ä–∞–∑

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏, —É—à–µ–ª –Ω–∞ 3 –º–∏–Ω—É—Ç—ã
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏
2. –ö–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞: **"–ñ–¥–∏—Ç–µ 5 –º–∏–Ω"**
3. –ó–∞–∫—Ä—ã–ª–∏ –∏–≥—Ä—É –Ω–∞ 3 –º–∏–Ω—É—Ç—ã
4. **–û—Ç–∫—Ä—ã–ª–∏ —Å–Ω–æ–≤–∞** ‚Üí –ö–Ω–æ–ø–∫–∞ –≤—Å—ë –µ—â—ë –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞: **"–ñ–¥–∏—Ç–µ 2 –º–∏–Ω"** ‚úÖ
5. –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω—É–ª–∏—Ç—Å—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏, —É—à–µ–ª –Ω–∞ 6+ –º–∏–Ω—É—Ç
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏
2. –ó–∞–∫—Ä—ã–ª–∏ –∏–≥—Ä—É –Ω–∞ 6 –º–∏–Ω—É—Ç (–±–æ–ª—å—à–µ –∫—É–ª–¥–∞—É–Ω–∞)
3. **–û—Ç–∫—Ä—ã–ª–∏ —Å–Ω–æ–≤–∞** ‚Üí –°—á–µ—Ç—á–∏–∫ —Å–±—Ä–æ—à–µ–Ω: **(3/3)** ‚úÖ
4. –ú–æ–∂–µ—Ç–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- `generationHistory` - –º–∞—Å—Å–∏–≤ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å Firebase (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω)

### –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
- –£–¥–∞–ª—è—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (Array.isArray)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
```
1. –ù–∞–∂–º–∏—Ç–µ "üîÑ –ù–æ–≤—ã–µ —É—á–∞—Å—Ç–∫–∏" 2 —Ä–∞–∑–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—á–µ—Ç—á–∏–∫: (1/3)
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
4. –°—á–µ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è (1/3) ‚úÖ
```

### –¢–µ—Å—Ç 2: –ö—É–ª–¥–∞—É–Ω –æ—Ñ—Ñ–ª–∞–π–Ω
```
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏
2. –ó–∞–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –Ω–∞ 3 –º–∏–Ω—É—Ç—ã
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É —Å–Ω–æ–≤–∞
4. –ö–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ —Å –æ—Å—Ç–∞–≤—à–∏–º—Å—è –≤—Ä–µ–º–µ–Ω–µ–º ‚úÖ
```

### –¢–µ—Å—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å
```
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 1-2 –ø–æ–ø—ã—Ç–∫–∏
2. –ó–∞–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É –Ω–∞ 6+ –º–∏–Ω—É—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É
4. –°—á–µ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å (3/3) ‚úÖ
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é
game.state.generationHistory

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å
CONFIG.generation.maxAttempts - game.state.generationHistory.length

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –¥–æ —Å–±—Ä–æ—Å–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏)
if (game.state.generationHistory.length > 0) {
    const oldest = Math.min(...game.state.generationHistory);
    const timeLeft = Math.ceil((CONFIG.generation.cooldownTime - (Date.now() - oldest)) / 1000 / 60);
    console.log(`–û—Å—Ç–∞–ª–æ—Å—å –∂–¥–∞—Ç—å: ${timeLeft} –º–∏–Ω—É—Ç`);
}
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `config.js`:
```javascript
generation: {
    maxAttempts: 3,              // –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫
    cooldownTime: 5 * 60 * 1000  // 5 –º–∏–Ω—É—Ç –∫—É–ª–¥–∞—É–Ω
}
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
**–î–∞—Ç–∞:** 2025-11-17 20:00
**–í–µ—Ä—Å–∏—è:** 1.2.1
